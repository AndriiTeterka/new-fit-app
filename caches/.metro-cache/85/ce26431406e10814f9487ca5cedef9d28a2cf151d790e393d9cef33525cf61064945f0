{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":31,"index":46}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./DeprecatedNavigationInChildContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":47},"end":{"line":4,"column":93,"index":140}}],"key":"q52xm1L6GcwAHIDdgCYRmHsHIPQ=","exportNames":["*"],"imports":1}},{"name":"./NavigationBuilderContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":141},"end":{"line":5,"column":73,"index":214}}],"key":"vvb+tbs8cGp9hlTxgL5PZCjRz5E=","exportNames":["*"],"imports":1}},{"name":"./useOnPreventRemove.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":215},"end":{"line":6,"column":82,"index":297}}],"key":"PbhCaGdR39Jz0OkkS237FN1qkxU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      n[k] = e[k];\n    });\n    n.default = e;\n    return n;\n  }\n  exports.useOnAction = useOnAction;\n  var _react = require(_dependencyMap[0], \"react\");\n  var React = _interopNamespace(_react);\n  var _DeprecatedNavigationInChildContextJs = require(_dependencyMap[1], \"./DeprecatedNavigationInChildContext.js\");\n  var _NavigationBuilderContextJs = require(_dependencyMap[2], \"./NavigationBuilderContext.js\");\n  var _useOnPreventRemoveJs = require(_dependencyMap[3], \"./useOnPreventRemove.js\");\n  /**\n   * Hook to handle actions for a navigator, including state updates and bubbling.\n   *\n   * Bubbling an action is achieved in 2 ways:\n   * 1. To bubble action to parent, we expose the action handler in context and then access the parent context\n   * 2. To bubble action to child, child adds event listeners subscribing to actions from parent\n   *\n   * When the action handler handles as action, it returns `true`, otherwise `false`.\n   */\n  function useOnAction(_ref) {\n    var router = _ref.router,\n      getState = _ref.getState,\n      setState = _ref.setState,\n      key = _ref.key,\n      actionListeners = _ref.actionListeners,\n      beforeRemoveListeners = _ref.beforeRemoveListeners,\n      routerConfigOptions = _ref.routerConfigOptions,\n      emitter = _ref.emitter;\n    var _React$useContext = React.useContext(_NavigationBuilderContextJs.NavigationBuilderContext),\n      onActionParent = _React$useContext.onAction,\n      onRouteFocusParent = _React$useContext.onRouteFocus,\n      addListenerParent = _React$useContext.addListener,\n      onDispatchAction = _React$useContext.onDispatchAction;\n    var navigationInChildEnabled = React.useContext(_DeprecatedNavigationInChildContextJs.DeprecatedNavigationInChildContext);\n    var routerConfigOptionsRef = React.useRef(routerConfigOptions);\n    React.useEffect(() => {\n      routerConfigOptionsRef.current = routerConfigOptions;\n    });\n    var onAction = React.useCallback(function (action) {\n      var visitedNavigators = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Set();\n      var state = getState();\n\n      // Since actions can bubble both up and down, they could come to the same navigator again\n      // We keep track of navigators which have already tried to handle the action and return if it's already visited\n      if (visitedNavigators.has(state.key)) {\n        return false;\n      }\n      visitedNavigators.add(state.key);\n      if (typeof action.target !== 'string' || action.target === state.key) {\n        var result = router.getStateForAction(state, action, routerConfigOptionsRef.current);\n\n        // If a target is specified and set to current navigator, the action shouldn't bubble\n        // So instead of `null`, we use the state object for such cases to signal that action was handled\n        result = result === null && action.target === state.key ? state : result;\n        if (result !== null) {\n          onDispatchAction(action, state === result);\n          if (state !== result) {\n            var isPrevented = (0, _useOnPreventRemoveJs.shouldPreventRemove)(emitter, beforeRemoveListeners, state.routes, result.routes, action);\n            if (isPrevented) {\n              return true;\n            }\n            setState(result);\n          }\n          if (onRouteFocusParent !== undefined) {\n            // Some actions such as `NAVIGATE` also want to bring the navigated route to focus in the whole tree\n            // This means we need to focus all of the parent navigators of this navigator as well\n            var shouldFocus = router.shouldActionChangeFocus(action);\n            if (shouldFocus && key !== undefined) {\n              onRouteFocusParent(key);\n            }\n          }\n          return true;\n        }\n      }\n      if (onActionParent !== undefined) {\n        // Bubble action to the parent if the current navigator didn't handle it\n        if (onActionParent(action, visitedNavigators)) {\n          return true;\n        }\n      }\n      if (typeof action.target === 'string' ||\n      // For backward compatibility\n      action.type === 'NAVIGATE_DEPRECATED' || navigationInChildEnabled) {\n        // If the action wasn't handled by current navigator or a parent navigator, let children handle it\n        // Handling this when target isn't specified is deprecated and will be removed in the future\n        for (var i = actionListeners.length - 1; i >= 0; i--) {\n          var listener = actionListeners[i];\n          if (listener(action, visitedNavigators)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    }, [actionListeners, beforeRemoveListeners, emitter, getState, navigationInChildEnabled, key, onActionParent, onDispatchAction, onRouteFocusParent, router, setState]);\n    (0, _useOnPreventRemoveJs.useOnPreventRemove)({\n      getState,\n      emitter,\n      beforeRemoveListeners\n    });\n    React.useEffect(() => addListenerParent?.('action', onAction), [addListenerParent, onAction]);\n    return onAction;\n  }\n});","lineCount":114,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13],[7,11,1,13,"_interopNamespace"],[7,29,1,13,"e"],[7,30,1,13],[8,4,1,13],[8,8,1,13,"e"],[8,9,1,13],[8,13,1,13,"e"],[8,14,1,13],[8,15,1,13,"__esModule"],[8,25,1,13],[8,34,1,13,"e"],[8,35,1,13],[9,4,1,13],[9,8,1,13,"n"],[9,9,1,13],[10,4,1,13],[10,8,1,13,"e"],[10,9,1,13],[10,11,1,13,"Object"],[10,17,1,13],[10,18,1,13,"keys"],[10,22,1,13],[10,23,1,13,"e"],[10,24,1,13],[10,26,1,13,"forEach"],[10,33,1,13],[10,44,1,13,"k"],[10,45,1,13],[11,6,1,13,"n"],[11,7,1,13],[11,8,1,13,"k"],[11,9,1,13],[11,13,1,13,"e"],[11,14,1,13],[11,15,1,13,"k"],[11,16,1,13],[12,4,1,13],[13,4,1,13,"n"],[13,5,1,13],[13,6,1,13,"default"],[13,13,1,13],[13,16,1,13,"e"],[13,17,1,13],[14,4,1,13],[14,11,1,13,"n"],[14,12,1,13],[15,2,1,13],[16,2,16,0,"exports"],[16,9,16,0],[16,10,16,0,"useOnAction"],[16,21,16,0],[16,24,16,0,"useOnAction"],[16,35,16,0],[17,2,3,0],[17,6,3,0,"_react"],[17,12,3,0],[17,15,3,0,"require"],[17,22,3,0],[17,23,3,0,"_dependencyMap"],[17,37,3,0],[18,2,3,0],[18,6,3,0,"React"],[18,11,3,0],[18,14,3,0,"_interopNamespace"],[18,31,3,0],[18,32,3,0,"_react"],[18,38,3,0],[19,2,4,0],[19,6,4,0,"_DeprecatedNavigationInChildContextJs"],[19,43,4,0],[19,46,4,0,"require"],[19,53,4,0],[19,54,4,0,"_dependencyMap"],[19,68,4,0],[20,2,5,0],[20,6,5,0,"_NavigationBuilderContextJs"],[20,33,5,0],[20,36,5,0,"require"],[20,43,5,0],[20,44,5,0,"_dependencyMap"],[20,58,5,0],[21,2,6,0],[21,6,6,0,"_useOnPreventRemoveJs"],[21,27,6,0],[21,30,6,0,"require"],[21,37,6,0],[21,38,6,0,"_dependencyMap"],[21,52,6,0],[22,2,7,0],[23,0,8,0],[24,0,9,0],[25,0,10,0],[26,0,11,0],[27,0,12,0],[28,0,13,0],[29,0,14,0],[30,0,15,0],[31,2,16,7],[31,11,16,16,"useOnAction"],[31,22,16,27,"useOnAction"],[31,23,16,27,"_ref"],[31,27,16,27],[31,29,25,3],[32,4,25,3],[32,8,17,2,"router"],[32,14,17,8],[32,17,17,8,"_ref"],[32,21,17,8],[32,22,17,2,"router"],[32,28,17,8],[33,6,18,2,"getState"],[33,14,18,10],[33,17,18,10,"_ref"],[33,21,18,10],[33,22,18,2,"getState"],[33,30,18,10],[34,6,19,2,"setState"],[34,14,19,10],[34,17,19,10,"_ref"],[34,21,19,10],[34,22,19,2,"setState"],[34,30,19,10],[35,6,20,2,"key"],[35,9,20,5],[35,12,20,5,"_ref"],[35,16,20,5],[35,17,20,2,"key"],[35,20,20,5],[36,6,21,2,"actionListeners"],[36,21,21,17],[36,24,21,17,"_ref"],[36,28,21,17],[36,29,21,2,"actionListeners"],[36,44,21,17],[37,6,22,2,"beforeRemoveListeners"],[37,27,22,23],[37,30,22,23,"_ref"],[37,34,22,23],[37,35,22,2,"beforeRemoveListeners"],[37,56,22,23],[38,6,23,2,"routerConfigOptions"],[38,25,23,21],[38,28,23,21,"_ref"],[38,32,23,21],[38,33,23,2,"routerConfigOptions"],[38,52,23,21],[39,6,24,2,"emitter"],[39,13,24,9],[39,16,24,9,"_ref"],[39,20,24,9],[39,21,24,2,"emitter"],[39,28,24,9],[40,4,26,2],[40,8,26,2,"_React$useContext"],[40,25,26,2],[40,28,31,6,"React"],[40,33,31,11],[40,34,31,12,"useContext"],[40,44,31,22],[40,45,31,23,"NavigationBuilderContext"],[40,72,31,47],[40,73,31,47,"NavigationBuilderContext"],[40,97,31,47],[40,98,31,48],[41,6,27,14,"onActionParent"],[41,20,27,28],[41,23,27,28,"_React$useContext"],[41,40,27,28],[41,41,27,4,"onAction"],[41,49,27,12],[42,6,28,18,"onRouteFocusParent"],[42,24,28,36],[42,27,28,36,"_React$useContext"],[42,44,28,36],[42,45,28,4,"onRouteFocus"],[42,57,28,16],[43,6,29,17,"addListenerParent"],[43,23,29,34],[43,26,29,34,"_React$useContext"],[43,43,29,34],[43,44,29,4,"addListener"],[43,55,29,15],[44,6,30,4,"onDispatchAction"],[44,22,30,20],[44,25,30,20,"_React$useContext"],[44,42,30,20],[44,43,30,4,"onDispatchAction"],[44,59,30,20],[45,4,32,2],[45,8,32,8,"navigationInChildEnabled"],[45,32,32,32],[45,35,32,35,"React"],[45,40,32,40],[45,41,32,41,"useContext"],[45,51,32,51],[45,52,32,52,"DeprecatedNavigationInChildContext"],[45,89,32,86],[45,90,32,86,"DeprecatedNavigationInChildContext"],[45,124,32,86],[45,125,32,87],[46,4,33,2],[46,8,33,8,"routerConfigOptionsRef"],[46,30,33,30],[46,33,33,33,"React"],[46,38,33,38],[46,39,33,39,"useRef"],[46,45,33,45],[46,46,33,46,"routerConfigOptions"],[46,65,33,65],[46,66,33,66],[47,4,34,2,"React"],[47,9,34,7],[47,10,34,8,"useEffect"],[47,19,34,17],[47,20,34,18],[47,26,34,24],[48,6,35,4,"routerConfigOptionsRef"],[48,28,35,26],[48,29,35,27,"current"],[48,36,35,34],[48,39,35,37,"routerConfigOptions"],[48,58,35,56],[49,4,36,2],[49,5,36,3],[49,6,36,4],[50,4,37,2],[50,8,37,8,"onAction"],[50,16,37,16],[50,19,37,19,"React"],[50,24,37,24],[50,25,37,25,"useCallback"],[50,36,37,36],[50,37,37,37],[50,47,37,38,"action"],[50,53,37,44],[50,55,37,80],[51,6,37,80],[51,10,37,46,"visitedNavigators"],[51,27,37,63],[51,30,37,63,"arguments"],[51,39,37,63],[51,40,37,63,"length"],[51,46,37,63],[51,54,37,63,"arguments"],[51,63,37,63],[51,71,37,63,"undefined"],[51,80,37,63],[51,83,37,63,"arguments"],[51,92,37,63],[51,98,37,66],[51,102,37,70,"Set"],[51,105,37,73],[51,106,37,74],[51,107,37,75],[52,6,38,4],[52,10,38,10,"state"],[52,15,38,15],[52,18,38,18,"getState"],[52,26,38,26],[52,27,38,27],[52,28,38,28],[54,6,40,4],[55,6,41,4],[56,6,42,4],[56,10,42,8,"visitedNavigators"],[56,27,42,25],[56,28,42,26,"has"],[56,31,42,29],[56,32,42,30,"state"],[56,37,42,35],[56,38,42,36,"key"],[56,41,42,39],[56,42,42,40],[56,44,42,42],[57,8,43,6],[57,15,43,13],[57,20,43,18],[58,6,44,4],[59,6,45,4,"visitedNavigators"],[59,23,45,21],[59,24,45,22,"add"],[59,27,45,25],[59,28,45,26,"state"],[59,33,45,31],[59,34,45,32,"key"],[59,37,45,35],[59,38,45,36],[60,6,46,4],[60,10,46,8],[60,17,46,15,"action"],[60,23,46,21],[60,24,46,22,"target"],[60,30,46,28],[60,35,46,33],[60,43,46,41],[60,47,46,45,"action"],[60,53,46,51],[60,54,46,52,"target"],[60,60,46,58],[60,65,46,63,"state"],[60,70,46,68],[60,71,46,69,"key"],[60,74,46,72],[60,76,46,74],[61,8,47,6],[61,12,47,10,"result"],[61,18,47,16],[61,21,47,19,"router"],[61,27,47,25],[61,28,47,26,"getStateForAction"],[61,45,47,43],[61,46,47,44,"state"],[61,51,47,49],[61,53,47,51,"action"],[61,59,47,57],[61,61,47,59,"routerConfigOptionsRef"],[61,83,47,81],[61,84,47,82,"current"],[61,91,47,89],[61,92,47,90],[63,8,49,6],[64,8,50,6],[65,8,51,6,"result"],[65,14,51,12],[65,17,51,15,"result"],[65,23,51,21],[65,28,51,26],[65,32,51,30],[65,36,51,34,"action"],[65,42,51,40],[65,43,51,41,"target"],[65,49,51,47],[65,54,51,52,"state"],[65,59,51,57],[65,60,51,58,"key"],[65,63,51,61],[65,66,51,64,"state"],[65,71,51,69],[65,74,51,72,"result"],[65,80,51,78],[66,8,52,6],[66,12,52,10,"result"],[66,18,52,16],[66,23,52,21],[66,27,52,25],[66,29,52,27],[67,10,53,8,"onDispatchAction"],[67,26,53,24],[67,27,53,25,"action"],[67,33,53,31],[67,35,53,33,"state"],[67,40,53,38],[67,45,53,43,"result"],[67,51,53,49],[67,52,53,50],[68,10,54,8],[68,14,54,12,"state"],[68,19,54,17],[68,24,54,22,"result"],[68,30,54,28],[68,32,54,30],[69,12,55,10],[69,16,55,16,"isPrevented"],[69,27,55,27],[69,30,55,30],[69,34,55,30,"shouldPreventRemove"],[69,55,55,49],[69,56,55,49,"shouldPreventRemove"],[69,75,55,49],[69,77,55,50,"emitter"],[69,84,55,57],[69,86,55,59,"beforeRemoveListeners"],[69,107,55,80],[69,109,55,82,"state"],[69,114,55,87],[69,115,55,88,"routes"],[69,121,55,94],[69,123,55,96,"result"],[69,129,55,102],[69,130,55,103,"routes"],[69,136,55,109],[69,138,55,111,"action"],[69,144,55,117],[69,145,55,118],[70,12,56,10],[70,16,56,14,"isPrevented"],[70,27,56,25],[70,29,56,27],[71,14,57,12],[71,21,57,19],[71,25,57,23],[72,12,58,10],[73,12,59,10,"setState"],[73,20,59,18],[73,21,59,19,"result"],[73,27,59,25],[73,28,59,26],[74,10,60,8],[75,10,61,8],[75,14,61,12,"onRouteFocusParent"],[75,32,61,30],[75,37,61,35,"undefined"],[75,46,61,44],[75,48,61,46],[76,12,62,10],[77,12,63,10],[78,12,64,10],[78,16,64,16,"shouldFocus"],[78,27,64,27],[78,30,64,30,"router"],[78,36,64,36],[78,37,64,37,"shouldActionChangeFocus"],[78,60,64,60],[78,61,64,61,"action"],[78,67,64,67],[78,68,64,68],[79,12,65,10],[79,16,65,14,"shouldFocus"],[79,27,65,25],[79,31,65,29,"key"],[79,34,65,32],[79,39,65,37,"undefined"],[79,48,65,46],[79,50,65,48],[80,14,66,12,"onRouteFocusParent"],[80,32,66,30],[80,33,66,31,"key"],[80,36,66,34],[80,37,66,35],[81,12,67,10],[82,10,68,8],[83,10,69,8],[83,17,69,15],[83,21,69,19],[84,8,70,6],[85,6,71,4],[86,6,72,4],[86,10,72,8,"onActionParent"],[86,24,72,22],[86,29,72,27,"undefined"],[86,38,72,36],[86,40,72,38],[87,8,73,6],[88,8,74,6],[88,12,74,10,"onActionParent"],[88,26,74,24],[88,27,74,25,"action"],[88,33,74,31],[88,35,74,33,"visitedNavigators"],[88,52,74,50],[88,53,74,51],[88,55,74,53],[89,10,75,8],[89,17,75,15],[89,21,75,19],[90,8,76,6],[91,6,77,4],[92,6,78,4],[92,10,78,8],[92,17,78,15,"action"],[92,23,78,21],[92,24,78,22,"target"],[92,30,78,28],[92,35,78,33],[92,43,78,41],[93,6,79,4],[94,6,80,4,"action"],[94,12,80,10],[94,13,80,11,"type"],[94,17,80,15],[94,22,80,20],[94,43,80,41],[94,47,80,45,"navigationInChildEnabled"],[94,71,80,69],[94,73,80,71],[95,8,81,6],[96,8,82,6],[97,8,83,6],[97,13,83,11],[97,17,83,15,"i"],[97,18,83,16],[97,21,83,19,"actionListeners"],[97,36,83,34],[97,37,83,35,"length"],[97,43,83,41],[97,46,83,44],[97,47,83,45],[97,49,83,47,"i"],[97,50,83,48],[97,54,83,52],[97,55,83,53],[97,57,83,55,"i"],[97,58,83,56],[97,60,83,58],[97,62,83,60],[98,10,84,8],[98,14,84,14,"listener"],[98,22,84,22],[98,25,84,25,"actionListeners"],[98,40,84,40],[98,41,84,41,"i"],[98,42,84,42],[98,43,84,43],[99,10,85,8],[99,14,85,12,"listener"],[99,22,85,20],[99,23,85,21,"action"],[99,29,85,27],[99,31,85,29,"visitedNavigators"],[99,48,85,46],[99,49,85,47],[99,51,85,49],[100,12,86,10],[100,19,86,17],[100,23,86,21],[101,10,87,8],[102,8,88,6],[103,6,89,4],[104,6,90,4],[104,13,90,11],[104,18,90,16],[105,4,91,2],[105,5,91,3],[105,7,91,5],[105,8,91,6,"actionListeners"],[105,23,91,21],[105,25,91,23,"beforeRemoveListeners"],[105,46,91,44],[105,48,91,46,"emitter"],[105,55,91,53],[105,57,91,55,"getState"],[105,65,91,63],[105,67,91,65,"navigationInChildEnabled"],[105,91,91,89],[105,93,91,91,"key"],[105,96,91,94],[105,98,91,96,"onActionParent"],[105,112,91,110],[105,114,91,112,"onDispatchAction"],[105,130,91,128],[105,132,91,130,"onRouteFocusParent"],[105,150,91,148],[105,152,91,150,"router"],[105,158,91,156],[105,160,91,158,"setState"],[105,168,91,166],[105,169,91,167],[105,170,91,168],[106,4,92,2],[106,8,92,2,"useOnPreventRemove"],[106,29,92,20],[106,30,92,20,"useOnPreventRemove"],[106,48,92,20],[106,50,92,21],[107,6,93,4,"getState"],[107,14,93,12],[108,6,94,4,"emitter"],[108,13,94,11],[109,6,95,4,"beforeRemoveListeners"],[110,4,96,2],[110,5,96,3],[110,6,96,4],[111,4,97,2,"React"],[111,9,97,7],[111,10,97,8,"useEffect"],[111,19,97,17],[111,20,97,18],[111,26,97,24,"addListenerParent"],[111,43,97,41],[111,46,97,44],[111,54,97,52],[111,56,97,54,"onAction"],[111,64,97,62],[111,65,97,63],[111,67,97,65],[111,68,97,66,"addListenerParent"],[111,85,97,83],[111,87,97,85,"onAction"],[111,95,97,93],[111,96,97,94],[111,97,97,95],[112,4,98,2],[112,11,98,9,"onAction"],[112,19,98,17],[113,2,99,0],[114,0,99,1],[114,3]],"functionMap":{"names":["<global>","useOnAction","React.useEffect$argument_0","onAction"],"mappings":"AAA;OCe;kBCkB;GDE;qCEC;GFsD;kBCM,6CD;CDE"},"hasCjsExports":false},"type":"js/module"}]}