{"dependencies":[{"name":"./Updates","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":37,"index":37}}],"key":"dHmtn1izBCeSkZ/2BgK9eSyi8a8=","exportNames":["*"],"imports":1}},{"name":"./UseUpdates.types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":38},"end":{"line":2,"column":53,"index":91}}],"key":"c/0dTIDFMt3vtNcWYCgpJC9RQHM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      n[k] = e[k];\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"currentlyRunning\", {\n    enumerable: true,\n    get: function () {\n      return currentlyRunning;\n    }\n  });\n  Object.defineProperty(exports, \"updateFromManifest\", {\n    enumerable: true,\n    get: function () {\n      return updateFromManifest;\n    }\n  });\n  Object.defineProperty(exports, \"updateFromRollback\", {\n    enumerable: true,\n    get: function () {\n      return updateFromRollback;\n    }\n  });\n  Object.defineProperty(exports, \"updatesStateFromContext\", {\n    enumerable: true,\n    get: function () {\n      return updatesStateFromContext;\n    }\n  });\n  var _Updates = require(_dependencyMap[0], \"./Updates\");\n  var Updates = _interopNamespace(_Updates);\n  var _UseUpdatesTypes = require(_dependencyMap[1], \"./UseUpdates.types\");\n  // The currently running info, constructed from Updates constants\n  var currentlyRunning = {\n    updateId: Updates.updateId ?? undefined,\n    channel: Updates.channel ?? undefined,\n    createdAt: Updates.createdAt ?? undefined,\n    launchDuration: Updates.launchDuration ?? undefined,\n    isEmbeddedLaunch: Updates.isEmbeddedLaunch,\n    isEmergencyLaunch: Updates.isEmergencyLaunch,\n    emergencyLaunchReason: Updates.emergencyLaunchReason,\n    manifest: Updates.manifest ?? undefined,\n    runtimeVersion: Updates.runtimeVersion ?? undefined\n  };\n  // Constructs an UpdateInfo from a manifest\n  var updateFromManifest = manifest => {\n    return {\n      type: _UseUpdatesTypes.UpdateInfoType.NEW,\n      updateId: manifest.id ?? '',\n      createdAt: manifest && 'createdAt' in manifest && manifest.createdAt ? new Date(manifest.createdAt) :\n      // We should never reach this if the manifest is valid and has a commit time,\n      // but leave this in so that createdAt is always defined\n      new Date(0),\n      manifest\n    };\n  };\n  var updateFromRollback = rollback => ({\n    type: _UseUpdatesTypes.UpdateInfoType.ROLLBACK,\n    createdAt: new Date(rollback.commitTime),\n    manifest: undefined,\n    updateId: undefined\n  });\n  // Transform the useUpdates() state based on native state machine context\n  var updatesStateFromContext = context => {\n    var availableUpdate = context?.latestManifest ? updateFromManifest(context?.latestManifest) : context.rollback ? updateFromRollback(context.rollback) : undefined;\n    var downloadedUpdate = context?.downloadedManifest ? updateFromManifest(context?.downloadedManifest) : context.rollback ? updateFromRollback(context.rollback) : undefined;\n    return {\n      isStartupProcedureRunning: context.isStartupProcedureRunning,\n      isUpdateAvailable: context.isUpdateAvailable,\n      isUpdatePending: context.isUpdatePending,\n      isChecking: context.isChecking,\n      isDownloading: context.isDownloading,\n      isRestarting: context.isRestarting,\n      restartCount: context.restartCount,\n      availableUpdate,\n      downloadedUpdate,\n      checkError: context.checkError,\n      downloadError: context.downloadError,\n      downloadProgress: context.downloadProgress,\n      lastCheckForUpdateTimeSinceRestart: context.lastCheckForUpdateTime\n    };\n  };\n});","lineCount":93,"map":[[16,2,4,0,"Object"],[16,8,4,0],[16,9,4,0,"defineProperty"],[16,23,4,0],[16,24,4,0,"exports"],[16,31,4,0],[17,4,4,0,"enumerable"],[17,14,4,0],[18,4,4,0,"get"],[18,7,4,0],[18,18,4,0,"get"],[18,19,4,0],[19,6,4,0],[19,13,4,0,"currentlyRunning"],[19,29,4,0],[20,4,4,0],[21,2,4,0],[22,2,16,0,"Object"],[22,8,16,0],[22,9,16,0,"defineProperty"],[22,23,16,0],[22,24,16,0,"exports"],[22,31,16,0],[23,4,16,0,"enumerable"],[23,14,16,0],[24,4,16,0,"get"],[24,7,16,0],[24,18,16,0,"get"],[24,19,16,0],[25,6,16,0],[25,13,16,0,"updateFromManifest"],[25,31,16,0],[26,4,16,0],[27,2,16,0],[28,2,28,0,"Object"],[28,8,28,0],[28,9,28,0,"defineProperty"],[28,23,28,0],[28,24,28,0,"exports"],[28,31,28,0],[29,4,28,0,"enumerable"],[29,14,28,0],[30,4,28,0,"get"],[30,7,28,0],[30,18,28,0,"get"],[30,19,28,0],[31,6,28,0],[31,13,28,0,"updateFromRollback"],[31,31,28,0],[32,4,28,0],[33,2,28,0],[34,2,35,0,"Object"],[34,8,35,0],[34,9,35,0,"defineProperty"],[34,23,35,0],[34,24,35,0,"exports"],[34,31,35,0],[35,4,35,0,"enumerable"],[35,14,35,0],[36,4,35,0,"get"],[36,7,35,0],[36,18,35,0,"get"],[36,19,35,0],[37,6,35,0],[37,13,35,0,"updatesStateFromContext"],[37,36,35,0],[38,4,35,0],[39,2,35,0],[40,2,1,0],[40,6,1,0,"_Updates"],[40,14,1,0],[40,17,1,0,"require"],[40,24,1,0],[40,25,1,0,"_dependencyMap"],[40,39,1,0],[41,2,1,0],[41,6,1,0,"Updates"],[41,13,1,0],[41,16,1,0,"_interopNamespace"],[41,33,1,0],[41,34,1,0,"_Updates"],[41,42,1,0],[42,2,2,0],[42,6,2,0,"_UseUpdatesTypes"],[42,22,2,0],[42,25,2,0,"require"],[42,32,2,0],[42,33,2,0,"_dependencyMap"],[42,47,2,0],[43,2,3,0],[44,2,4,7],[44,6,4,13,"currentlyRunning"],[44,22,4,29],[44,25,4,32],[45,4,5,4,"updateId"],[45,12,5,12],[45,14,5,14,"Updates"],[45,21,5,21],[45,22,5,22,"updateId"],[45,30,5,30],[45,34,5,34,"undefined"],[45,43,5,43],[46,4,6,4,"channel"],[46,11,6,11],[46,13,6,13,"Updates"],[46,20,6,20],[46,21,6,21,"channel"],[46,28,6,28],[46,32,6,32,"undefined"],[46,41,6,41],[47,4,7,4,"createdAt"],[47,13,7,13],[47,15,7,15,"Updates"],[47,22,7,22],[47,23,7,23,"createdAt"],[47,32,7,32],[47,36,7,36,"undefined"],[47,45,7,45],[48,4,8,4,"launchDuration"],[48,18,8,18],[48,20,8,20,"Updates"],[48,27,8,27],[48,28,8,28,"launchDuration"],[48,42,8,42],[48,46,8,46,"undefined"],[48,55,8,55],[49,4,9,4,"isEmbeddedLaunch"],[49,20,9,20],[49,22,9,22,"Updates"],[49,29,9,29],[49,30,9,30,"isEmbeddedLaunch"],[49,46,9,46],[50,4,10,4,"isEmergencyLaunch"],[50,21,10,21],[50,23,10,23,"Updates"],[50,30,10,30],[50,31,10,31,"isEmergencyLaunch"],[50,48,10,48],[51,4,11,4,"emergencyLaunchReason"],[51,25,11,25],[51,27,11,27,"Updates"],[51,34,11,34],[51,35,11,35,"emergencyLaunchReason"],[51,56,11,56],[52,4,12,4,"manifest"],[52,12,12,12],[52,14,12,14,"Updates"],[52,21,12,21],[52,22,12,22,"manifest"],[52,30,12,30],[52,34,12,34,"undefined"],[52,43,12,43],[53,4,13,4,"runtimeVersion"],[53,18,13,18],[53,20,13,20,"Updates"],[53,27,13,27],[53,28,13,28,"runtimeVersion"],[53,42,13,42],[53,46,13,46,"undefined"],[54,2,14,0],[54,3,14,1],[55,2,15,0],[56,2,16,7],[56,6,16,13,"updateFromManifest"],[56,24,16,31],[56,27,16,35,"manifest"],[56,35,16,43],[56,39,16,48],[57,4,17,4],[57,11,17,11],[58,6,18,8,"type"],[58,10,18,12],[58,12,18,14,"UpdateInfoType"],[58,28,18,28],[58,29,18,28,"UpdateInfoType"],[58,43,18,28],[58,44,18,29,"NEW"],[58,47,18,32],[59,6,19,8,"updateId"],[59,14,19,16],[59,16,19,18,"manifest"],[59,24,19,26],[59,25,19,27,"id"],[59,27,19,29],[59,31,19,33],[59,33,19,35],[60,6,20,8,"createdAt"],[60,15,20,17],[60,17,20,19,"manifest"],[60,25,20,27],[60,29,20,31],[60,40,20,42],[60,44,20,46,"manifest"],[60,52,20,54],[60,56,20,58,"manifest"],[60,64,20,66],[60,65,20,67,"createdAt"],[60,74,20,76],[60,77,21,14],[60,81,21,18,"Date"],[60,85,21,22],[60,86,21,23,"manifest"],[60,94,21,31],[60,95,21,32,"createdAt"],[60,104,21,41],[60,105,21,42],[61,6,22,14],[62,6,23,16],[63,6,24,16],[63,10,24,20,"Date"],[63,14,24,24],[63,15,24,25],[63,16,24,26],[63,17,24,27],[64,6,25,8,"manifest"],[65,4,26,4],[65,5,26,5],[66,2,27,0],[66,3,27,1],[67,2,28,7],[67,6,28,13,"updateFromRollback"],[67,24,28,31],[67,27,28,35,"rollback"],[67,35,28,43],[67,40,28,49],[68,4,29,4,"type"],[68,8,29,8],[68,10,29,10,"UpdateInfoType"],[68,26,29,24],[68,27,29,24,"UpdateInfoType"],[68,41,29,24],[68,42,29,25,"ROLLBACK"],[68,50,29,33],[69,4,30,4,"createdAt"],[69,13,30,13],[69,15,30,15],[69,19,30,19,"Date"],[69,23,30,23],[69,24,30,24,"rollback"],[69,32,30,32],[69,33,30,33,"commitTime"],[69,43,30,43],[69,44,30,44],[70,4,31,4,"manifest"],[70,12,31,12],[70,14,31,14,"undefined"],[70,23,31,23],[71,4,32,4,"updateId"],[71,12,32,12],[71,14,32,14,"undefined"],[72,2,33,0],[72,3,33,1],[72,4,33,2],[73,2,34,0],[74,2,35,7],[74,6,35,13,"updatesStateFromContext"],[74,29,35,36],[74,32,35,40,"context"],[74,39,35,47],[74,43,35,52],[75,4,36,4],[75,8,36,10,"availableUpdate"],[75,23,36,25],[75,26,36,28,"context"],[75,33,36,35],[75,35,36,37,"latestManifest"],[75,49,36,51],[75,52,37,10,"updateFromManifest"],[75,70,37,28],[75,71,37,29,"context"],[75,78,37,36],[75,80,37,38,"latestManifest"],[75,94,37,52],[75,95,37,53],[75,98,38,10,"context"],[75,105,38,17],[75,106,38,18,"rollback"],[75,114,38,26],[75,117,39,14,"updateFromRollback"],[75,135,39,32],[75,136,39,33,"context"],[75,143,39,40],[75,144,39,41,"rollback"],[75,152,39,49],[75,153,39,50],[75,156,40,14,"undefined"],[75,165,40,23],[76,4,41,4],[76,8,41,10,"downloadedUpdate"],[76,24,41,26],[76,27,41,29,"context"],[76,34,41,36],[76,36,41,38,"downloadedManifest"],[76,54,41,56],[76,57,42,10,"updateFromManifest"],[76,75,42,28],[76,76,42,29,"context"],[76,83,42,36],[76,85,42,38,"downloadedManifest"],[76,103,42,56],[76,104,42,57],[76,107,43,10,"context"],[76,114,43,17],[76,115,43,18,"rollback"],[76,123,43,26],[76,126,44,14,"updateFromRollback"],[76,144,44,32],[76,145,44,33,"context"],[76,152,44,40],[76,153,44,41,"rollback"],[76,161,44,49],[76,162,44,50],[76,165,45,14,"undefined"],[76,174,45,23],[77,4,46,4],[77,11,46,11],[78,6,47,8,"isStartupProcedureRunning"],[78,31,47,33],[78,33,47,35,"context"],[78,40,47,42],[78,41,47,43,"isStartupProcedureRunning"],[78,66,47,68],[79,6,48,8,"isUpdateAvailable"],[79,23,48,25],[79,25,48,27,"context"],[79,32,48,34],[79,33,48,35,"isUpdateAvailable"],[79,50,48,52],[80,6,49,8,"isUpdatePending"],[80,21,49,23],[80,23,49,25,"context"],[80,30,49,32],[80,31,49,33,"isUpdatePending"],[80,46,49,48],[81,6,50,8,"isChecking"],[81,16,50,18],[81,18,50,20,"context"],[81,25,50,27],[81,26,50,28,"isChecking"],[81,36,50,38],[82,6,51,8,"isDownloading"],[82,19,51,21],[82,21,51,23,"context"],[82,28,51,30],[82,29,51,31,"isDownloading"],[82,42,51,44],[83,6,52,8,"isRestarting"],[83,18,52,20],[83,20,52,22,"context"],[83,27,52,29],[83,28,52,30,"isRestarting"],[83,40,52,42],[84,6,53,8,"restartCount"],[84,18,53,20],[84,20,53,22,"context"],[84,27,53,29],[84,28,53,30,"restartCount"],[84,40,53,42],[85,6,54,8,"availableUpdate"],[85,21,54,23],[86,6,55,8,"downloadedUpdate"],[86,22,55,24],[87,6,56,8,"checkError"],[87,16,56,18],[87,18,56,20,"context"],[87,25,56,27],[87,26,56,28,"checkError"],[87,36,56,38],[88,6,57,8,"downloadError"],[88,19,57,21],[88,21,57,23,"context"],[88,28,57,30],[88,29,57,31,"downloadError"],[88,42,57,44],[89,6,58,8,"downloadProgress"],[89,22,58,24],[89,24,58,26,"context"],[89,31,58,33],[89,32,58,34,"downloadProgress"],[89,48,58,50],[90,6,59,8,"lastCheckForUpdateTimeSinceRestart"],[90,40,59,42],[90,42,59,44,"context"],[90,49,59,51],[90,50,59,52,"lastCheckForUpdateTime"],[91,4,60,4],[91,5,60,5],[92,2,61,0],[92,3,61,1],[93,0,61,2],[93,3]],"functionMap":{"names":["<global>","updateFromManifest","updateFromRollback","updatesStateFromContext"],"mappings":"AAA;kCCe;CDW;kCEC;EFK;uCGE;CH0B"},"hasCjsExports":false},"type":"js/module"}]}