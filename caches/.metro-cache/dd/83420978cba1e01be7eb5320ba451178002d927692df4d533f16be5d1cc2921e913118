{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":31,"index":46}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"use-latest-callback","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":47},"end":{"line":4,"column":52,"index":99}}],"key":"2ER/r3Agt+5SFwaFR8HXg24Rpu4=","exportNames":["*"],"imports":1}},{"name":"./deepFreeze.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":100},"end":{"line":5,"column":45,"index":145}}],"key":"rNxrvQaXjK4/vUvPksJpbMJ5u+4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      n[k] = e[k];\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useSyncState = useSyncState;\n  var _react = require(_dependencyMap[0], \"react\");\n  var React = _interopNamespace(_react);\n  var _useLatestCallback = require(_dependencyMap[1], \"use-latest-callback\");\n  var useLatestCallback = _interopDefault(_useLatestCallback);\n  var _deepFreezeJs = require(_dependencyMap[2], \"./deepFreeze.js\");\n  var createStore = getInitialState => {\n    var listeners = [];\n    var initialized = false;\n    var state;\n    var getState = () => {\n      if (initialized) {\n        return state;\n      }\n      initialized = true;\n      state = (0, _deepFreezeJs.deepFreeze)(getInitialState());\n      return state;\n    };\n    var isBatching = false;\n    var didUpdate = false;\n    var setState = newState => {\n      state = (0, _deepFreezeJs.deepFreeze)(newState);\n      didUpdate = true;\n      if (!isBatching) {\n        listeners.forEach(listener => listener());\n      }\n    };\n    var subscribe = callback => {\n      listeners.push(callback);\n      return () => {\n        var index = listeners.indexOf(callback);\n        if (index > -1) {\n          listeners.splice(index, 1);\n        }\n      };\n    };\n    var batchUpdates = callback => {\n      isBatching = true;\n      callback();\n      isBatching = false;\n      if (didUpdate) {\n        didUpdate = false;\n        listeners.forEach(listener => listener());\n      }\n    };\n    return {\n      getState,\n      setState,\n      batchUpdates,\n      subscribe\n    };\n  };\n  function useSyncState(getInitialState) {\n    var store = React.useRef(createStore(getInitialState)).current;\n    var state = React.useSyncExternalStore(store.subscribe, store.getState, store.getState);\n    React.useDebugValue(state);\n    var pendingUpdatesRef = React.useRef([]);\n    var scheduleUpdate = (0, useLatestCallback.default)(callback => {\n      pendingUpdatesRef.current.push(callback);\n    });\n    var flushUpdates = (0, useLatestCallback.default)(() => {\n      var pendingUpdates = pendingUpdatesRef.current;\n      pendingUpdatesRef.current = [];\n      if (pendingUpdates.length !== 0) {\n        store.batchUpdates(() => {\n          // Flush all the pending updates\n          for (var update of pendingUpdates) {\n            update();\n          }\n        });\n      }\n    });\n    return {\n      state,\n      getState: store.getState,\n      setState: store.setState,\n      scheduleUpdate,\n      flushUpdates\n    };\n  }\n});","lineCount":101,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13],[7,11,1,13,"_interopNamespace"],[7,29,1,13,"e"],[7,30,1,13],[8,4,1,13],[8,8,1,13,"e"],[8,9,1,13],[8,13,1,13,"e"],[8,14,1,13],[8,15,1,13,"__esModule"],[8,25,1,13],[8,34,1,13,"e"],[8,35,1,13],[9,4,1,13],[9,8,1,13,"n"],[9,9,1,13],[10,4,1,13],[10,8,1,13,"e"],[10,9,1,13],[10,11,1,13,"Object"],[10,17,1,13],[10,18,1,13,"keys"],[10,22,1,13],[10,23,1,13,"e"],[10,24,1,13],[10,26,1,13,"forEach"],[10,33,1,13],[10,44,1,13,"k"],[10,45,1,13],[11,6,1,13,"n"],[11,7,1,13],[11,8,1,13,"k"],[11,9,1,13],[11,13,1,13,"e"],[11,14,1,13],[11,15,1,13,"k"],[11,16,1,13],[12,4,1,13],[13,4,1,13,"n"],[13,5,1,13],[13,6,1,13,"default"],[13,13,1,13],[13,16,1,13,"e"],[13,17,1,13],[14,4,1,13],[14,11,1,13,"n"],[14,12,1,13],[15,2,1,13],[16,2,1,13],[16,11,1,13,"_interopDefault"],[16,27,1,13,"e"],[16,28,1,13],[17,4,1,13],[17,11,1,13,"e"],[17,12,1,13],[17,16,1,13,"e"],[17,17,1,13],[17,18,1,13,"__esModule"],[17,28,1,13],[17,31,1,13,"e"],[17,32,1,13],[18,6,1,13,"default"],[18,13,1,13],[18,15,1,13,"e"],[19,4,1,13],[20,2,1,13],[21,2,52,0,"exports"],[21,9,52,0],[21,10,52,0,"useSyncState"],[21,22,52,0],[21,25,52,0,"useSyncState"],[21,37,52,0],[22,2,3,0],[22,6,3,0,"_react"],[22,12,3,0],[22,15,3,0,"require"],[22,22,3,0],[22,23,3,0,"_dependencyMap"],[22,37,3,0],[23,2,3,0],[23,6,3,0,"React"],[23,11,3,0],[23,14,3,0,"_interopNamespace"],[23,31,3,0],[23,32,3,0,"_react"],[23,38,3,0],[24,2,4,0],[24,6,4,0,"_useLatestCallback"],[24,24,4,0],[24,27,4,0,"require"],[24,34,4,0],[24,35,4,0,"_dependencyMap"],[24,49,4,0],[25,2,4,0],[25,6,4,0,"useLatestCallback"],[25,23,4,0],[25,26,4,0,"_interopDefault"],[25,41,4,0],[25,42,4,0,"_useLatestCallback"],[25,60,4,0],[26,2,5,0],[26,6,5,0,"_deepFreezeJs"],[26,19,5,0],[26,22,5,0,"require"],[26,29,5,0],[26,30,5,0,"_dependencyMap"],[26,44,5,0],[27,2,6,0],[27,6,6,6,"createStore"],[27,17,6,17],[27,20,6,20,"getInitialState"],[27,35,6,35],[27,39,6,39],[28,4,7,2],[28,8,7,8,"listeners"],[28,17,7,17],[28,20,7,20],[28,22,7,22],[29,4,8,2],[29,8,8,6,"initialized"],[29,19,8,17],[29,22,8,20],[29,27,8,25],[30,4,9,2],[30,8,9,6,"state"],[30,13,9,11],[31,4,10,2],[31,8,10,8,"getState"],[31,16,10,16],[31,19,10,19,"getState"],[31,20,10,19],[31,25,10,25],[32,6,11,4],[32,10,11,8,"initialized"],[32,21,11,19],[32,23,11,21],[33,8,12,6],[33,15,12,13,"state"],[33,20,12,18],[34,6,13,4],[35,6,14,4,"initialized"],[35,17,14,15],[35,20,14,18],[35,24,14,22],[36,6,15,4,"state"],[36,11,15,9],[36,14,15,12],[36,18,15,12,"deepFreeze"],[36,31,15,22],[36,32,15,22,"deepFreeze"],[36,42,15,22],[36,44,15,23,"getInitialState"],[36,59,15,38],[36,60,15,39],[36,61,15,40],[36,62,15,41],[37,6,16,4],[37,13,16,11,"state"],[37,18,16,16],[38,4,17,2],[38,5,17,3],[39,4,18,2],[39,8,18,6,"isBatching"],[39,18,18,16],[39,21,18,19],[39,26,18,24],[40,4,19,2],[40,8,19,6,"didUpdate"],[40,17,19,15],[40,20,19,18],[40,25,19,23],[41,4,20,2],[41,8,20,8,"setState"],[41,16,20,16],[41,19,20,19,"newState"],[41,27,20,27],[41,31,20,31],[42,6,21,4,"state"],[42,11,21,9],[42,14,21,12],[42,18,21,12,"deepFreeze"],[42,31,21,22],[42,32,21,22,"deepFreeze"],[42,42,21,22],[42,44,21,23,"newState"],[42,52,21,31],[42,53,21,32],[43,6,22,4,"didUpdate"],[43,15,22,13],[43,18,22,16],[43,22,22,20],[44,6,23,4],[44,10,23,8],[44,11,23,9,"isBatching"],[44,21,23,19],[44,23,23,21],[45,8,24,6,"listeners"],[45,17,24,15],[45,18,24,16,"forEach"],[45,25,24,23],[45,26,24,24,"listener"],[45,34,24,32],[45,38,24,36,"listener"],[45,46,24,44],[45,47,24,45],[45,48,24,46],[45,49,24,47],[46,6,25,4],[47,4,26,2],[47,5,26,3],[48,4,27,2],[48,8,27,8,"subscribe"],[48,17,27,17],[48,20,27,20,"callback"],[48,28,27,28],[48,32,27,32],[49,6,28,4,"listeners"],[49,15,28,13],[49,16,28,14,"push"],[49,20,28,18],[49,21,28,19,"callback"],[49,29,28,27],[49,30,28,28],[50,6,29,4],[50,13,29,11],[50,19,29,17],[51,8,30,6],[51,12,30,12,"index"],[51,17,30,17],[51,20,30,20,"listeners"],[51,29,30,29],[51,30,30,30,"indexOf"],[51,37,30,37],[51,38,30,38,"callback"],[51,46,30,46],[51,47,30,47],[52,8,31,6],[52,12,31,10,"index"],[52,17,31,15],[52,20,31,18],[52,21,31,19],[52,22,31,20],[52,24,31,22],[53,10,32,8,"listeners"],[53,19,32,17],[53,20,32,18,"splice"],[53,26,32,24],[53,27,32,25,"index"],[53,32,32,30],[53,34,32,32],[53,35,32,33],[53,36,32,34],[54,8,33,6],[55,6,34,4],[55,7,34,5],[56,4,35,2],[56,5,35,3],[57,4,36,2],[57,8,36,8,"batchUpdates"],[57,20,36,20],[57,23,36,23,"callback"],[57,31,36,31],[57,35,36,35],[58,6,37,4,"isBatching"],[58,16,37,14],[58,19,37,17],[58,23,37,21],[59,6,38,4,"callback"],[59,14,38,12],[59,15,38,13],[59,16,38,14],[60,6,39,4,"isBatching"],[60,16,39,14],[60,19,39,17],[60,24,39,22],[61,6,40,4],[61,10,40,8,"didUpdate"],[61,19,40,17],[61,21,40,19],[62,8,41,6,"didUpdate"],[62,17,41,15],[62,20,41,18],[62,25,41,23],[63,8,42,6,"listeners"],[63,17,42,15],[63,18,42,16,"forEach"],[63,25,42,23],[63,26,42,24,"listener"],[63,34,42,32],[63,38,42,36,"listener"],[63,46,42,44],[63,47,42,45],[63,48,42,46],[63,49,42,47],[64,6,43,4],[65,4,44,2],[65,5,44,3],[66,4,45,2],[66,11,45,9],[67,6,46,4,"getState"],[67,14,46,12],[68,6,47,4,"setState"],[68,14,47,12],[69,6,48,4,"batchUpdates"],[69,18,48,16],[70,6,49,4,"subscribe"],[71,4,50,2],[71,5,50,3],[72,2,51,0],[72,3,51,1],[73,2,52,7],[73,11,52,16,"useSyncState"],[73,23,52,28,"useSyncState"],[73,24,52,29,"getInitialState"],[73,39,52,44],[73,41,52,46],[74,4,53,2],[74,8,53,8,"store"],[74,13,53,13],[74,16,53,16,"React"],[74,21,53,21],[74,22,53,22,"useRef"],[74,28,53,28],[74,29,53,29,"createStore"],[74,40,53,40],[74,41,53,41,"getInitialState"],[74,56,53,56],[74,57,53,57],[74,58,53,58],[74,59,53,59,"current"],[74,66,53,66],[75,4,54,2],[75,8,54,8,"state"],[75,13,54,13],[75,16,54,16,"React"],[75,21,54,21],[75,22,54,22,"useSyncExternalStore"],[75,42,54,42],[75,43,54,43,"store"],[75,48,54,48],[75,49,54,49,"subscribe"],[75,58,54,58],[75,60,54,60,"store"],[75,65,54,65],[75,66,54,66,"getState"],[75,74,54,74],[75,76,54,76,"store"],[75,81,54,81],[75,82,54,82,"getState"],[75,90,54,90],[75,91,54,91],[76,4,55,2,"React"],[76,9,55,7],[76,10,55,8,"useDebugValue"],[76,23,55,21],[76,24,55,22,"state"],[76,29,55,27],[76,30,55,28],[77,4,56,2],[77,8,56,8,"pendingUpdatesRef"],[77,25,56,25],[77,28,56,28,"React"],[77,33,56,33],[77,34,56,34,"useRef"],[77,40,56,40],[77,41,56,41],[77,43,56,43],[77,44,56,44],[78,4,57,2],[78,8,57,8,"scheduleUpdate"],[78,22,57,22],[78,25,57,25],[78,29,57,25,"useLatestCallback"],[78,46,57,42],[78,47,57,42,"default"],[78,54,57,42],[78,56,57,43,"callback"],[78,64,57,51],[78,68,57,55],[79,6,58,4,"pendingUpdatesRef"],[79,23,58,21],[79,24,58,22,"current"],[79,31,58,29],[79,32,58,30,"push"],[79,36,58,34],[79,37,58,35,"callback"],[79,45,58,43],[79,46,58,44],[80,4,59,2],[80,5,59,3],[80,6,59,4],[81,4,60,2],[81,8,60,8,"flushUpdates"],[81,20,60,20],[81,23,60,23],[81,27,60,23,"useLatestCallback"],[81,44,60,40],[81,45,60,40,"default"],[81,52,60,40],[81,54,60,41],[81,60,60,47],[82,6,61,4],[82,10,61,10,"pendingUpdates"],[82,24,61,24],[82,27,61,27,"pendingUpdatesRef"],[82,44,61,44],[82,45,61,45,"current"],[82,52,61,52],[83,6,62,4,"pendingUpdatesRef"],[83,23,62,21],[83,24,62,22,"current"],[83,31,62,29],[83,34,62,32],[83,36,62,34],[84,6,63,4],[84,10,63,8,"pendingUpdates"],[84,24,63,22],[84,25,63,23,"length"],[84,31,63,29],[84,36,63,34],[84,37,63,35],[84,39,63,37],[85,8,64,6,"store"],[85,13,64,11],[85,14,64,12,"batchUpdates"],[85,26,64,24],[85,27,64,25],[85,33,64,31],[86,10,65,8],[87,10,66,8],[87,15,66,13],[87,19,66,19,"update"],[87,25,66,25],[87,29,66,29,"pendingUpdates"],[87,43,66,43],[87,45,66,45],[88,12,67,10,"update"],[88,18,67,16],[88,19,67,17],[88,20,67,18],[89,10,68,8],[90,8,69,6],[90,9,69,7],[90,10,69,8],[91,6,70,4],[92,4,71,2],[92,5,71,3],[92,6,71,4],[93,4,72,2],[93,11,72,9],[94,6,73,4,"state"],[94,11,73,9],[95,6,74,4,"getState"],[95,14,74,12],[95,16,74,14,"store"],[95,21,74,19],[95,22,74,20,"getState"],[95,30,74,28],[96,6,75,4,"setState"],[96,14,75,12],[96,16,75,14,"store"],[96,21,75,19],[96,22,75,20,"setState"],[96,30,75,28],[97,6,76,4,"scheduleUpdate"],[97,20,76,18],[98,6,77,4,"flushUpdates"],[99,4,78,2],[99,5,78,3],[100,2,79,0],[101,0,79,1],[101,3]],"functionMap":{"names":["<global>","createStore","getState","setState","listeners.forEach$argument_0","subscribe","<anonymous>","batchUpdates","useSyncState","useLatestCallback$argument_0","store.batchUpdates$argument_0"],"mappings":"AAA;oBCK;mBCI;GDO;mBEG;wBCI,sBD;GFE;oBIC;WCE;KDK;GJC;uBMC;wBHM,sBG;GNE;CDO;OQC;2CCK;GDE;yCCC;yBCI;ODK;GDE;CRQ"},"hasCjsExports":false},"type":"js/module"}]}