{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":99,"index":99}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./injection","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":158},"end":{"line":4,"column":67,"index":225}}],"key":"Ri12V5UvvLPFQrEealibULxq4mg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useDOMImperativeHandle = useDOMImperativeHandle;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _injection = require(_dependencyMap[1], \"./injection\");\n  /**\n   * A React `useImperativeHandle` like hook for DOM components.\n   *\n   */\n  function useDOMImperativeHandle(ref, init, deps) {\n    // @ts-expect-error: Added via react-native-webview\n    var isTargetWeb = typeof window.ReactNativeWebView === 'undefined';\n    var stubHandlerFactory = (0, _react.useCallback)(() => ({}), deps ?? []);\n\n    // This standard useImperativeHandle hook is serving for web\n    (0, _react.useImperativeHandle)(ref, isTargetWeb ? init : stubHandlerFactory, deps);\n\n    // This `globalThis._domRefProxy` is serving for native\n    (0, _react.useEffect)(() => {\n      if (!isTargetWeb) {\n        globalThis._domRefProxy = init();\n        // TODO(@kitten): Type `ReactNativeWebView` and the message data\n        // @ts-expect-error: Added via react-native-webview\n        window.ReactNativeWebView.postMessage(JSON.stringify({\n          type: _injection.REGISTER_DOM_IMPERATIVE_HANDLE_PROPS,\n          data: Object.keys(globalThis._domRefProxy)\n        }));\n      }\n      return () => {\n        if (!isTargetWeb) {\n          globalThis._domRefProxy = undefined;\n        }\n      };\n    }, deps);\n  }\n});","lineCount":40,"map":[[7,2,14,0,"exports"],[7,9,14,0],[7,10,14,0,"useDOMImperativeHandle"],[7,32,14,0],[7,35,14,0,"useDOMImperativeHandle"],[7,57,14,0],[8,2,1,0],[8,6,1,0,"_react"],[8,12,1,0],[8,15,1,0,"require"],[8,22,1,0],[8,23,1,0,"_dependencyMap"],[8,37,1,0],[9,2,4,0],[9,6,4,0,"_injection"],[9,16,4,0],[9,19,4,0,"require"],[9,26,4,0],[9,27,4,0,"_dependencyMap"],[9,41,4,0],[10,2,10,0],[11,0,11,0],[12,0,12,0],[13,0,13,0],[14,2,14,7],[14,11,14,16,"useDOMImperativeHandle"],[14,33,14,38,"useDOMImperativeHandle"],[14,34,15,2,"ref"],[14,37,15,13],[14,39,16,2,"init"],[14,43,16,15],[14,45,17,2,"deps"],[14,49,17,23],[14,51,18,2],[15,4,19,2],[16,4,20,2],[16,8,20,8,"isTargetWeb"],[16,19,20,19],[16,22,20,22],[16,29,20,29,"window"],[16,35,20,35],[16,36,20,36,"ReactNativeWebView"],[16,54,20,54],[16,59,20,59],[16,70,20,70],[17,4,22,2],[17,8,22,8,"stubHandlerFactory"],[17,26,22,26],[17,29,22,29],[17,33,22,29,"useCallback"],[17,39,22,40],[17,40,22,40,"useCallback"],[17,51,22,40],[17,53,22,41],[17,60,22,48],[17,61,22,49],[17,62,22,50],[17,63,22,56],[17,65,22,58,"deps"],[17,69,22,62],[17,73,22,66],[17,75,22,68],[17,76,22,69],[19,4,24,2],[20,4,25,2],[20,8,25,2,"useImperativeHandle"],[20,14,25,21],[20,15,25,21,"useImperativeHandle"],[20,34,25,21],[20,36,25,22,"ref"],[20,39,25,25],[20,41,25,27,"isTargetWeb"],[20,52,25,38],[20,55,25,41,"init"],[20,59,25,45],[20,62,25,48,"stubHandlerFactory"],[20,80,25,66],[20,82,25,68,"deps"],[20,86,25,72],[20,87,25,73],[22,4,27,2],[23,4,28,2],[23,8,28,2,"useEffect"],[23,14,28,11],[23,15,28,11,"useEffect"],[23,24,28,11],[23,26,28,12],[23,32,28,18],[24,6,29,4],[24,10,29,8],[24,11,29,9,"isTargetWeb"],[24,22,29,20],[24,24,29,22],[25,8,30,6,"globalThis"],[25,18,30,16],[25,19,30,17,"_domRefProxy"],[25,31,30,29],[25,34,30,32,"init"],[25,38,30,36],[25,39,30,37],[25,40,30,38],[26,8,31,6],[27,8,32,6],[28,8,33,6,"window"],[28,14,33,12],[28,15,33,13,"ReactNativeWebView"],[28,33,33,31],[28,34,33,32,"postMessage"],[28,45,33,43],[28,46,34,8,"JSON"],[28,50,34,12],[28,51,34,13,"stringify"],[28,60,34,22],[28,61,34,23],[29,10,35,10,"type"],[29,14,35,14],[29,16,35,16,"REGISTER_DOM_IMPERATIVE_HANDLE_PROPS"],[29,26,35,52],[29,27,35,52,"REGISTER_DOM_IMPERATIVE_HANDLE_PROPS"],[29,63,35,52],[30,10,36,10,"data"],[30,14,36,14],[30,16,36,16,"Object"],[30,22,36,22],[30,23,36,23,"keys"],[30,27,36,27],[30,28,36,28,"globalThis"],[30,38,36,38],[30,39,36,39,"_domRefProxy"],[30,51,36,58],[31,8,37,8],[31,9,37,9],[31,10,38,6],[31,11,38,7],[32,6,39,4],[33,6,40,4],[33,13,40,11],[33,19,40,17],[34,8,41,6],[34,12,41,10],[34,13,41,11,"isTargetWeb"],[34,24,41,22],[34,26,41,24],[35,10,42,8,"globalThis"],[35,20,42,18],[35,21,42,19,"_domRefProxy"],[35,33,42,31],[35,36,42,34,"undefined"],[35,45,42,43],[36,8,43,6],[37,6,44,4],[37,7,44,5],[38,4,45,2],[38,5,45,3],[38,7,45,5,"deps"],[38,11,45,9],[38,12,45,10],[39,2,46,0],[40,0,46,1],[40,3]],"functionMap":{"names":["<global>","useDOMImperativeHandle","stubHandlerFactory","useEffect$argument_0","<anonymous>"],"mappings":"AAA;OCa;yCCQ,eD;YEM;WCY;KDI;GFC;CDC"},"hasCjsExports":false},"type":"js/module"}]}